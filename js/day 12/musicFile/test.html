<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Playlist App</title>
</head>

<body>
    <h1>Music Playlist Manager</h1>

    <!-- Input fields for song details -->
    <div id="input-form">
        <input type="text" id="song-title" placeholder="Song Title">
        <input type="text" id="artist" placeholder="Artist">
        <input type="text" id="duration" placeholder="Duration (e.g., 3:30)">
        <input type="text" id="genre" placeholder="Genre">
        <button id="add-song-btn">Add Song</button>
    </div>
    <button onclick="sortPlaylist('title')">Sort by Title</button>
    <button onclick="sortPlaylist('artist')">Sort by Artist</button>
    <button onclick="sortPlaylist('duration')">Sort by Duration</button>
    <button onclick="sortPlaylist('genre')">Sort by Genre</button>
    <input type="text" id="search" placeholder="Search by title or artist" onkeyup="searchSongs()">

    <!-- Display the playlist -->
    <h2>Your Playlist</h2>
    <div id="playlist"></div>

    <script>

        let playlist = []; // An array to store songs

        // Get elements from the DOM
        const addSongBtn = document.getElementById('add-song-btn');
        const playlistDiv = document.getElementById('playlist');

        // Add event listener for the Add Song button
        addSongBtn.addEventListener('click', addSong);

        function addSong() {
            // Get input values
            const title = document.getElementById('song-title').value;
            const artist = document.getElementById('artist').value;
            const duration = document.getElementById('duration').value;
            const genre = document.getElementById('genre').value;

            // Check if inputs are not empty
            if (title && artist && duration && genre) {
                // Create a song object
                const song = { title, artist, duration, genre };

                // Add song to the playlist array
                playlist.push(song);

                // Update the DOM to display the playlist
                displayPlaylist();

                // Clear the input fields
                document.getElementById('song-title').value = '';
                document.getElementById('artist').value = '';
                document.getElementById('duration').value = '';
                document.getElementById('genre').value = '';
            } else {
                alert('Please fill out all fields!');
            }
        }

        function displayPlaylist() {
            // Clear the playlist display first
            playlistDiv.innerHTML = '';

            // Loop through the playlist array and create HTML for each song
            playlist.forEach((song, index) => {
                const songItem = document.createElement('div');
                songItem.innerHTML = `${index + 1}. <strong>${song.title}</strong> by ${song.artist} (${song.duration}) - ${song.genre}`;
                playlistDiv.appendChild(songItem);
            });
        }

        function addSong() {
            const title = document.getElementById('song-title').value;
            const artist = document.getElementById('artist').value;
            const duration = document.getElementById('duration').value;
            const genre = document.getElementById('genre').value;

            if (title && artist && duration && genre) {
                const song = { title, artist, duration, genre };
                playlist.push(song);

                // Store playlist in LocalStorage
                localStorage.setItem('playlist', JSON.stringify(playlist));

                displayPlaylist();

                document.getElementById('song-title').value = '';
                document.getElementById('artist').value = '';
                document.getElementById('duration').value = '';
                document.getElementById('genre').value = '';
            } else {
                alert('Please fill out all fields!');
            }
        }
        // On page load, retrieve playlist from LocalStorage
        window.onload = function () {
            const storedPlaylist = localStorage.getItem('playlist');
            if (storedPlaylist) {
                playlist = JSON.parse(storedPlaylist);
                displayPlaylist();
            }
        }
        function displayPlaylist() {
            playlistDiv.innerHTML = '';

            playlist.forEach((song, index) => {
                const songItem = document.createElement('div');
                songItem.innerHTML = `
            ${index + 1}. <strong>${song.title}</strong> by ${song.artist} (${song.duration}) - ${song.genre}
            <button onclick="editSong(${index})">Edit</button>
            <button onclick="deleteSong(${index})">Delete</button>
        `;
                playlistDiv.appendChild(songItem);
            });
        }

        // Edit function
        function editSong(index) {
            const song = playlist[index];
            document.getElementById('song-title').value = song.title;
            document.getElementById('artist').value = song.artist;
            document.getElementById('duration').value = song.duration;
            document.getElementById('genre').value = song.genre;

            // Remove the old song so we can save the updated version
            deleteSong(index);
        }

        // Delete function
        function deleteSong(index) {
            playlist.splice(index, 1);
            localStorage.setItem('playlist', JSON.stringify(playlist));
            displayPlaylist();
        }
        function sortPlaylist(criteria) {
            playlist.sort((a, b) => {
                if (a[criteria].toLowerCase() < b[criteria].toLowerCase()) return -1;
                if (a[criteria].toLowerCase() > b[criteria].toLowerCase()) return 1;
                return 0;
            });

            displayPlaylist();
            localStorage.setItem('playlist', JSON.stringify(playlist)); // Update LocalStorage after sorting
        }
        function searchSongs() {
            const query = document.getElementById('search').value.toLowerCase();
            const filteredSongs = playlist.filter(song =>
                song.title.toLowerCase().includes(query) || song.artist.toLowerCase().includes(query)
            );

            playlistDiv.innerHTML = '';
            filteredSongs.forEach((song, index) => {
                const songItem = document.createElement('div');
                songItem.innerHTML = `${index + 1}. <strong>${song.title}</strong> by ${song.artist} (${song.duration}) - ${song.genre}`;
                playlistDiv.appendChild(songItem);
            });
        }

    </script>
</body>

</html>